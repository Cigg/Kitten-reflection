precision mediump float;
uniform vec4 uClipPlane;
uniform vec3 uEyeCoord;

varying vec4 vWorldSpaceNormal;
varying vec4 vWorldSpaceCoord;

void main() {
	float clipPos = dot (vWorldSpaceCoord.xyz, uClipPlane.xyz) + uClipPlane.w;
    if(clipPos < -0.01)
    	discard;
    	
    // diffuse light
	float diff = dot(vec3(0,1,0), vWorldSpaceNormal.xyz);
	diff = max(0.0, diff);
	diff *= 0.6;
	vec3 col = vec3(1.0, 1.0, 0.0);
	col *= diff;

	// ambient light
	col.xy += 0.15;

	//float distFromEye = distance(vWorldSpaceCoord.xyz, uEyeCoord)*0.025;

	gl_FragColor = vec4(col, 1.0);
}